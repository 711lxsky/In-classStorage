# 输入输出接口

输入接口：三态门：74LS244

输出接口：锁存器：74LS273

## 中断响应过程

> 中断 DMA 设计基本概念，不涉及大的设计

**中断向量表，中断向量码之间的关系**

- 中断向量码 * 4 得到中断向量表的行号
- 按 中断向量码 * 4 访问内存，前两个字节赋给 IP，后两个字节 （大地址）赋值给 CS 寄存器

![mark](http://media.sumblog.cn/blog/20190111/L41Sg4dI9b5m.png?imageslim)

1. 中断请求
2. 中断响应
   - 断点保护
     - PSW 入栈
     - 自动关中断：IF = 0， TF = 0；
     - CS 内容入栈
     - IP 内容入栈
   - 中断判优
   - 中断源识别：中断向量法，由中断源提供中断类型号，确定中断源
   - 获得中断服务程序首地址
3. 中断处理
   - 保护现场 （PUSH 寄存器）
   - 开中断 （STI）
   - 中断处理
   - 关中断 （CLI）
   - 恢复现场 （POP 寄存器）
   - 中断返回 （IRET）

### 8086 系统的中断过程

![mark](http://media.sumblog.cn/blog/20190111/VERl43KoGM48.png?imageslim)

## 8259 可编程中断控制器

**初始化命令字：ICW**

初始化的初始化字 ：ICW2 存放中断向量码的高5位，低三位内部自动填充

![mark](http://media.sumblog.cn/blog/20190111/1l1W4jptm8tR.png?imageslim)

- D7 ~ D3 中断向量码的高5位
- D2~D0 中断源的序号 IRn
  - 000 - 111 对应 IR0-IR7
  - 有 8259 根据中断源的序号自动填入

**DMA：使用 8237**



